# 10/26

# [ëª©ì°¨]ğŸ“

[1. AJAX](#ajax)

[2. Axios](#axios)

[3. íŒ”ë¡œì‰ ê¸°ëŠ¥êµ¬í˜„ ì‹¤ìŠµ](#íŒ”ë¡œì‰-ê¸°ëŠ¥êµ¬í˜„-ì‹¤ìŠµ)

<br>

## AJAX

- ë¹„ë™ê¸°ì  ì²˜ë¦¬
- ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë™ì‹œì— ì²˜ë¦¬í•˜ëŠ” ë°©ì‹
- ë¹„ë™ê¸° í†µì‹ ì„ ì´ìš©í•˜ë©´ **í™”ë©´ ì „ì²´ë¥¼ ìƒˆë¡œê³ ì¹¨ í•˜ì§€ ì•Šì•„ë„ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚´ê³ , ë°ì´í„°ë¥¼ ë°›ì•„ í™”ë©´ì˜ ì¼ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸ ê°€ëŠ¥**
- ì´ëŸ¬í•œ ë¹„ë™ê¸° í†µì‹  ì›¹ ê°œë°œ ê¸°ìˆ ì„ AJAXë¼ê³  í•¨
- ë¹„ë™ê¸° ì›¹ í†µì‹ ì„ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤‘ í•˜ë‚˜ê°€ Axios
- JSëŠ” ë¸Œë¼ìš°ì € ì¡°ì‘ì— ìš©ì´

```js
console.log('hi')

setTimeout(function () {
  console.log('ì‘ì—…ì¤‘')
})

console.log('bye')
// hi / bye / ì‘ì—…ì¤‘ ìˆœìœ¼ë¡œ ì¶œë ¥
```
```py
import requests

response = requests.get('https://naver.com') # ìš”ì²­ì´ ë„ì°©í• ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ responseì— ì €ì¥í•˜ê³ 
print(response.text) # ê·¸ ë‹¤ìŒì„ ì‹¤í–‰

# JSì—ì„œëŠ”
# ìš”ì²­ì´ ë„ì°©í•˜ëŠ” ê²ƒ ì•ˆê¸°ë‹¤ë¦¬ê³  ë‹¤ìŒì„ ì‹¤í–‰
# ê·¸ë¦¬ê³  ë„ì°©í•˜ë©´ ë¬´ì—‡ì¸ê°€ë¥¼ í•¨
```

- Event Loop ê¸°ë°˜ ë™ì‹œì„± ëª¨ë¸
```js
Call Stack: ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ í•´ë‹¹ ìš”ì²­ì„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” Stackí˜•íƒœì˜ ìë£Œ êµ¬ì¡°

Web API(Browser API): JavaScript ì—”ì§„ì´ ì•„ë‹Œ ë¸Œë¼ìš°ì € ì˜ì—­ì—ì„œ ì œê³µí•˜ëŠ” API

Task Queue(Event Queue, Message Queue): ë¹„ë™ê¸° ì²˜ë¦¬ëœ callback í•¨ìˆ˜ê°€ ëŒ€ê¸°í•˜ëŠ” Queue(FIFO)í˜•íƒœì˜ ìë£Œêµ¬ì¡°

Event Loop: Call Stackì´ ë¹„ì–´ ìˆëŠ”ì§€ í™•ì¸, ë¹„ì–´ ìˆëŠ” ê²½ìš° Task Queueì—ì„œ ì‹¤í–‰ ëŒ€ê¸° ì¤‘ì¸ callback í•¨ìˆ˜ê°€ ìˆëŠ”ì§€ í™•ì¸
```


## Axios

- Promise based HTTP, ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ Promise ê¸°ë°˜ì˜ í´ë¼ì´ì–¸íŠ¸
- ë¹„ë™ê¸° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ ë¦¬ì†ŒìŠ¤ë¥¼ ì ê²Œ ì“°ë©°, ì‚¬ìš©ì ê²½í—˜ì´ ëŠ˜ì–´ë‚¨
- ìˆ˜ë§Œëª…ì´ ì‚¬ìš©í•˜ëŠ” ì„œë¹„ìŠ¤ì˜ ê²½ìš° í˜ì´ì§€ê°€ ìƒˆë¡œê³ ì¹¨ë  ë•Œë§ˆë‹¤ ì„œë²„ì—ëŠ” ë¶€ë‹´ìœ¼ë¡œ ì‘ìš©

```js
// Axios
const URL = '~~~'

// axiosëŠ” URLë¡œ ìš”ì²­ì„ ë³´ë‚´ì¤Œ
// ì²˜ë¦¬ê°€ ì™„ë£Œë˜ë©´ ì‹¤í–‰ì‹œì¼œì£¼ê² ë‹¤ëŠ” ì•½ì†(promise)
  // ì„±ê³µì ì´ë©´ then, ì‹¤íŒ¨ë©´ catch
axios.get(URS)
  .then(res => console.log(res.data.title)) // ì„±ê³µí•´ì„œ ë°›ì€ ì‘ë‹µ ê°ì²´ë¥¼ í™œìš©í•œ ì¡°ì‘
  .catch(err => console.log("Error!"))
```
```js
// ì¢‹ì•„ìš” ë²„íŠ¼ ì¡°ì‘
1. ì¢‹ì•„ìš”ì— idë‚˜ class ëª…ì„ ì§€ì–´ì¤Œ / url ì„¤ì •ì„ í•  ê±°ë¼ë©´ data-article-id="{{ article.pk}}" ê°’ì„ ë„˜ê²¨ì¤Œ 
2. const likeBtn = document.querySelector('#like-btn')
3. ì¢‹ì•„ìš” ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í•¨ìˆ˜ ì‹¤í–‰. likeBtn.addEventListener('click', function(event) { // ë¹„ë™ê¸° ìš”ì²­ì„ í•˜ê³  ì‹¶ìŒ
  axios({
    method: 'get',
    url: 'ì¢‹ì•„ìš” URLë¡œ ì„¤ì • .. /articles/${event.target.dataset.articleId}/like/'
  })
  .then(response => {
  })
})

// ì¥ê³ ì—ì„œ ë°›ì•„ì˜¤ê¸°
from django.http import JsonResponse

return JsonResponse({'hi': 'ì•ˆë…•'})
// axiosë¡œ ë³´ë‚¸ ê±¸ djangoì—ì„œ JsonResponseë¥¼ í†µí•´ ë°›ì•„ì˜´
// djangoì—ì„œ 
is_liked = False
is_liked = True ë¡œ ì„¤ì •í•´ì„œ
// ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ True / Falseë¡œ ê°’ì´ ë³€ê²½
return JsonResponse({'idLiked': is_liked, 'likeCount': article.like_users.count()})ë¡œ ê°’ì„ ë³€ê²½í•´ì¤Œ
// jsì—ì„œ 
if (response.data.isLiked === true) {
  event.target.classList.add('bi-heart-flil')
  event.target.classList.remove('bi-heart')
} else {
  event.target.classList.add('bi-heart')
  event.target.classList.remove('bi-heart-fill')
}
```

- ë¹„ë™ê¸° ì²˜ë¦¬
```py
1. ì–´ë–¤ ì´ë²¤íŠ¸ì¼ë•Œ ìš”ì²­ì„ ë³´ë‚¼ì§€
- formì„ ì‘ì„±í•˜ë©´
- /articles/<pk>/comments/
2. ì„œë²„ì—ì„œ ì–´ë–¤ ì‘ë‹µì„ JSONìœ¼ë¡œ
- ëŒ“ê¸€ ì •ë³´ë¥¼ ë³´ë‚´ì„œ
3. DOM ì¡°ì‘ì„ ì–´ë–»ê²Œ í• ì§€
- ëŒ“ê¸€ ëª©ë¡ì— ì¶”ê°€í•´ì¤Œ 
```

