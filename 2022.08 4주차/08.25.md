# 8/26

# [DB] QuerySet API ğŸ“

## **gt** ğŸ’­

```sql
Entry.objects.filter(id__gt=4)

==

SELECT ... WHERE id > 4;
```

- **gtëŠ” greater thenì˜ ì•½ì**

## **gte** ğŸ’­

```sql
Entry.objects.filter(id__gte=4)

==

SELECT ... WHERE id >= 4;
```

- **gteëŠ” greater then equalì˜ ì•½ì**

## **lt** ğŸ’­

```sql
Entry.objects.filter(id__lt=4)

==

SELECT ... WHERE id < 4;
```

- **ltëŠ” less thenì˜ ì•½ì**

## **lte** ğŸ’­

```sql
Entry.objects.filter(id__lte=4)

==

SELECT ... WHERE id <= 4;
```

- **lteëŠ” less then equalì˜ ì•½ì**

## **in** ğŸ’­

```sql
Entry.objects.filter(id__in=[1,3,4])
Entry.objects.filter(headline__in='abc')

==

SELECT ... WHERE id IN (1,3,4);
SELECT ... WHERE headline IN ('a','b','c');
```

## **startwith** ğŸ’­

```sql
Entry.objects.filter(headline__startwith='Lennon')

==

SELECT ... WHERE headline LIKE 'Lennon%';
```

## **istartwith** ğŸ’­

```sql
Entry.objects.filter(headline__istartwith='Lennon')

==

SELECT ... WHERE headline ILIKE 'Lennon%';
```

## **contains** ğŸ’­

```sql
Entry.objects.filter(headline__contains='Lennon')

==

SELECT ... WHERE headline LIKE '*Lennon%';
```

## **range** ğŸ’­

```sql
import datetime
start_date = datetime.date(2005, 1, 1)
end_date = datetime.date(2005, 3, 31)
Entry.objects.filter(pub_date__range=(start_date, end_date))

==

SELECT ... WHERE pub_date BETWEEN '2005-01-01' AND '2005-03-31';
```

<br/>

## **ORM í™•ì¥**

**Models.ForeignKey í•„ë“œ**

```py
2ê°œì˜ í•„ìˆ˜ ìœ„ì¹˜ ì¸ì = models.ForeignKey(ëª¨ë¸í‚¤, on_delete=models.____)

"Model class": ì°¸ì¡°í•˜ëŠ” ëª¨ë¸
"on_delete": ì™¸ë˜ í‚¤ê°€ ì°¸ì¡°í•˜ëŠ” ê°ì²´ê°€ ì‚­ì œë˜ì—ˆì„ ë•Œ ì²˜ë¦¬ ë°©ì‹
  - CASCADE: ë¶€ëª¨ ê°ì²´(ì°¸ì¡° ëœ ê°ì²´)ê°€ ì‚­ì œ ëì„ ë•Œ ì´ë¥¼ ì°¸ì¡°í•˜ëŠ” ê°ì²´ë„ ì‚­ì œ
  - PROTECT: ì‚­ì œë˜ì§€ ì•ŠìŒ
  - SET_NULL: NULL ì„¤ì •
  - SET_DEFAULT: ê¸°ë³¸ ê°’ ì„¤ì •
```

**Foreign Key(ì™¸ë˜í‚¤)**

```py
í‚¤ë¥¼ ë°ì´í„°ì— ì‚¬ìš©í•˜ì—¬ ë¶€ëª¨ í…Œì´ë¸”ì˜ ìœ ì¼í•œ ê°’ì„ ì°¸ì¡°

ì™¸ë˜ í‚¤ì˜ ê°’ì´ ë°˜ë“œì‹œ ë¶€ëª¨ í…Œì´ë¸”ì˜ ê¸°ë³¸ í‚¤ì¼ í•„ìš”ëŠ” ì—†ì§€ë§Œ ìœ ì¼í•œ ê°’ì´ì–´ì•¼ í•¨
```

## **ORM ì •ë¦¬**

```py
1. í…Œì´ë¸” ìƒì„± -> 2. í´ë˜ìŠ¤ ì •ì˜(ë§ˆì´ê·¸ë ˆì´ì…˜, ë§ˆì´ê·¸ë ˆì´íŠ¸) -> 3.ì¿¼ë¦¬(SQL)
```

# âœ… ì‹¤ìŠµ ë¬¸ì œ

## 8ì¼ì°¨ ì‹¤ìŠµ

# ë°ì´í„°ë² ì´ìŠ¤ 08 - ORM

### 1. `db/models.py` íŒŒì¼ì— ì•„ë˜ì˜ ëª¨ë¸ 3ê°œ `Director` `Genre` `Movie` ë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ê¸°ë³¸ ì½”ë“œ

```python
class Director(models.Model):
    name = models.TextField()
    debut = models.DateTimeField()
    country = models.TextField()

class Genre(models.Model):
    title = models.TextField()

class Movie(models.Model):
    director = models.ForeignKey(Director,on_delete=models.CASCADE)
    genre = models.ForeignKey(Genre,on_delete=models.CASCADE)
    title = models.TextField()
    opening_date = models.DateField()
    running_time = models.IntegerField()
    screening = models.BooleanField()
```

### 2. ëª¨ë¸ì„ ë§ˆì´ê·¸ë ˆì´íŠ¸(migrate) í•˜ì„¸ìš”.

```bash
# ê°€ìƒí™˜ê²½ ì‹¤í–‰ í™•ì¸ í›„ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì— ì…ë ¥í•©ë‹ˆë‹¤.
python manage.py makemigrations

python manage.py migrate
```

### 3. ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰í•´ì„œ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.

```python
directors = [
    ("ë´‰ì¤€í˜¸","1993-01-01","KOR"),
    ("ê¹€í•œë¯¼","1999-01-01","KOR"),
    ("ìµœë™í›ˆ","2004-01-01","KOR"),
    ("ì´ì •ì¬","2022-01-01","KOR"),
    ("ì´ê²½ê·œ","1992-01-01","KOR"),
    ("í•œì¬ë¦¼","2005-01-01","KOR"),
    ("Joseph Kosinski","1999-01-01","KOR"),
    ("ê¹€ì² ìˆ˜","2022-01-01","KOR"),
]

for director in directors:
    name_ = director[0]
    debut_ = director[1]
    country_ = director[2]
    Director.objects.create(name=name_, debut=debut_, country=country_)

genres = ["ì•¡ì…˜","ë“œë¼ë§ˆ","ì‚¬ê·¹","ë²”ì£„","ìŠ¤ë¦´ëŸ¬","SF","ë¬´í˜‘","ì²©ë³´","ì¬ë‚œ"]

for title_ in genres:
    genre = Genre()
    genre.title = title_
    genre.save()
```

### 4. Queryset ë©”ì†Œë“œ `get` ì„ í™œìš©í•´ì„œ `Director` í…Œì´ë¸”ì—ì„œ `name` ì´ ë´‰ì¤€í˜¸ì¸ ë°ì´í„°ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì¶œë ¥ ì˜ˆì‹œ

```
id : 1
name : ë´‰ì¤€í˜¸
debut : 1993-01-01 00:00:00
country : KOR
```

> ì½”ë“œ ì‘ì„±

```python
director = Director.objects.all()

for d in director:
    if d.name == 'ë´‰ì¤€í˜¸':
        print(f"id : {d.id}")
        print(f"name :{d.name}")
        print(f"debut : {d.debut}")
        print(f"country : {d.country}")
```

### 5. Queryset ë©”ì†Œë“œ `get` ì„ í™œìš©í•´ì„œ `Genre` í…Œì´ë¸”ì—ì„œ `title` ì´ ë“œë¼ë§ˆì¸ ë°ì´í„°ë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì¶œë ¥ ì˜ˆì‹œ

```
id : 2
title : ë“œë¼ë§ˆ
```

> ì½”ë“œ ì‘ì„±

```py
genre = Genre.objects.all()

for g in genre:
    if g.title == 'ë“œë¼ë§ˆ':
        print(f"id : {g.id}")
        print(f"title : {g.title}")
```

### 6. ìœ„ ë¬¸ì œì—ì„œ ì°¾ì€ `director` ì™€ `genre` ì™€ ì•„ë˜ `íŒíŠ¸ ì½”ë“œ`ë¥¼ í™œìš©í•´ì„œ `Movie` í…Œì´ë¸”ì— ì•„ë˜ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

| director | genre  | title  | opening_date | running_time | screening |
| -------- | ------ | ------ | ------------ | ------------ | --------- |
| ë´‰ì¤€í˜¸   | ë“œë¼ë§ˆ | ê¸°ìƒì¶© | 2019-05-30   | 132          | False     |

> íŒíŠ¸ ì½”ë“œ

```python
director_ = Director.objects.get(name='ë´‰ì¤€í˜¸')
genre_ = Genre.objects.get(title='ë“œë¼ë§ˆ')

movie = Movie()

movie.director = 'ë´‰ì¤€í˜¸'
movie.genre = 'ë“œë¼ë§ˆ'
movie.title = 'ê¸°ìƒì¶©'
movie.opening_date = '2019-05-30'
movie.running_time = '132'
movie.screening = False
movie.director_id = 1
movie.genre_id = 2

movie.save()
```

> ì½”ë“œ ì‘ì„±

```python
movie.director = 'ë´‰ì¤€í˜¸'
movie.genre = 'ë“œë¼ë§ˆ'
movie.title = 'ê¸°ìƒì¶©'
movie.opening_date = '2019-05-30'
movie.running_time = 132
movie.screening = False
movie.director_id = 1
movie.genre_id = 2
```

### 7. `Movie` í…Œì´ë¸”ì— ì•„ë˜ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

| director        | genre  | title         | opening_date | running_time | screening |
| --------------- | ------ | ------------- | ------------ | ------------ | --------- |
| ë´‰ì¤€í˜¸          | ë“œë¼ë§ˆ | ê´´ë¬¼          | 2006-07-27   | 119          | False     |
| ë´‰ì¤€í˜¸          | SF     | ì„¤êµ­ì—´ì°¨      | 2013-10-30   | 125          | False     |
| ê¹€í•œë¯¼          | ì‚¬ê·¹   | í•œì‚°          | 2022-07-27   | 129          | True      |
| ìµœë™í›ˆ          | SF     | ì™¸ê³„+ì¸       | 2022-07-20   | 142          | False     |
| ì´ì •ì¬          | ì²©ë³´   | í—ŒíŠ¸          | 2022-08-10   | 125          | True      |
| ì´ê²½ê·œ          | ì•¡ì…˜   | ë³µìˆ˜í˜ˆì „      | 1992-10-10   | 88           | False     |
| í•œì¬ë¦¼          | ì¬ë‚œ   | ë¹„ìƒì„ ì–¸      | 2022-08-03   | 140          | True      |
| Joseph Kosinski | ì•¡ì…˜   | íƒ‘ê±´ : ë§¤ë²„ë¦­ | 2022-06-22   | 130          | True      |

```python
movies = [
    ("ë´‰ì¤€í˜¸", "ë“œë¼ë§ˆ", "ê´´ë¬¼", "2006-07-27", 119, False),
    ("ë´‰ì¤€í˜¸", "SF", "ì„¤êµ­ì—´ì°¨", "2013-10-30", 125, False),
    ("ê¹€í•œë¯¼", "ì‚¬ê·¹", "í•œì‚°", "2022-07-27", 129, True),
    ("ìµœë™í›ˆ", "SF", "ì™¸ê³„+ì¸", "2022-07-20", 142, False),
    ("ì´ì •ì¬", "ì²©ë³´", "í—ŒíŠ¸", "2022-08-10", 125, True),
    ("ì´ê²½ê·œ", "ì•¡ì…˜", "ë³µìˆ˜í˜ˆì „", "1992-10-10", 88, False),
    ("í•œì¬ë¦¼", "ì¬ë‚œ", "ë¹„ìƒì„ ì–¸", "2022-08-03", 140, True),
    ("Joseph Kosinski", "ì•¡ì…˜", "íƒ‘ê±´ : ë§¤ë²„ë¦­", "2022-06-22", 130, True),
]
```

> ì½”ë“œ ì‘ì„±

```python
for m in movies:
     movie = Movie()
     movie.director = Director.objects.get(name=m[0])
     movie.genre = Genre.objects.get(title=m[1])
     movie.title = m[2]
     movie.opening_date = m[3]
     movie.running_time = m[4]
     movie.screening = m[5]
     movie.save()

```

### 8. `Movie` í…Œì´ë¸”ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì˜ˆì‹œ ì¶œë ¥

```
Director object (1) Genre object (2) ê¸°ìƒì¶© 2019-05-30 132 False
Director object (1) Genre object (2) ê´´ë¬¼ 2006-07-27 119 False
Director object (1) Genre object (6) ì„¤êµ­ì—´ì°¨ 2013-10-30 125 False
Director object (2) Genre object (3) í•œì‚° 2022-07-27 129 True
Director object (3) Genre object (6) ì™¸ê³„+ì¸ 2022-07-20 142 False
Director object (4) Genre object (8) í—ŒíŠ¸ 2022-08-10 125 True
Director object (5) Genre object (1) ë³µìˆ˜í˜ˆì „ 1992-10-10 88 False
Director object (6) Genre object (9) ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
Director object (7) Genre object (1) íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
```

> ì½”ë“œ ì‘ì„±

```python
movies = Movie.objects.all()
for movie in movies:
    print(
        movie.director, # movieì˜ director í•„ë“œ ì¶œë ¥
        movie.genre, # movieì˜ genre í•„ë“œ ì¶œë ¥
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 9. ìœ„ ë¬¸ì œì—ì„œ ì¡°íšŒí•œ `Director object (n)` ë¥¼ í™œìš©í•´ì„œ ê° ì˜í™”ì˜ ê°ë… `name` ì„ ì¡°íšŒí•´ì„œ ëŒ€ì‹  ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> íŒíŠ¸ : ê°ê°ì˜ Director object (n)ëŠ” Director ëª¨ë¸ì˜ ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤.

> ì˜ˆì‹œ ì¶œë ¥

```
ë´‰ì¤€í˜¸ Genre object (2) ê¸°ìƒì¶© 2019-05-30 132 False
ë´‰ì¤€í˜¸ Genre object (2) ê´´ë¬¼ 2006-07-27 119 False
ë´‰ì¤€í˜¸ Genre object (6) ì„¤êµ­ì—´ì°¨ 2013-10-30 125 False
ê¹€í•œë¯¼ Genre object (3) í•œì‚° 2022-07-27 129 True
ìµœë™í›ˆ Genre object (6) ì™¸ê³„+ì¸ 2022-07-20 142 False
ì´ì •ì¬ Genre object (8) í—ŒíŠ¸ 2022-08-10 125 True
ì´ê²½ê·œ Genre object (1) ë³µìˆ˜í˜ˆì „ 1992-10-10 88 False
í•œì¬ë¦¼ Genre object (9) ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
Joseph Kosinski Genre object (1) íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
```

> ì½”ë“œ ì‘ì„±

```python
movies = Movie.objects.all()
for movie in movies:
    print(
        movie.director.name, # movieì˜ director í•„ë“œì˜ name í•„ë“œ ì¶œë ¥
        movie.genre,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 10. ìœ„ ë¬¸ì œì—ì„œ ì¡°íšŒí•œ `Genre object (n)` ë¥¼ í™œìš©í•´ì„œ ê° ì˜í™”ì˜ ì¥ë¥´ `title` ì„ ì¡°íšŒí•´ì„œ ëŒ€ì‹  ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> íŒíŠ¸ : ê°ê°ì˜ Genre object (n)ëŠ” Genre ëª¨ë¸ì˜ ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤.

> ì˜ˆì‹œ ì¶œë ¥

```
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê¸°ìƒì¶© 2019-05-30 132 False
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê´´ë¬¼ 2006-07-27 119 False
ë´‰ì¤€í˜¸ SF ì„¤êµ­ì—´ì°¨ 2013-10-30 125 False
ê¹€í•œë¯¼ ì‚¬ê·¹ í•œì‚° 2022-07-27 129 True
ìµœë™í›ˆ SF ì™¸ê³„+ì¸ 2022-07-20 142 False
ì´ì •ì¬ ì²©ë³´ í—ŒíŠ¸ 2022-08-10 125 True
ì´ê²½ê·œ ì•¡ì…˜ ë³µìˆ˜í˜ˆì „ 1992-10-10 88 False
í•œì¬ë¦¼ ì¬ë‚œ ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
Joseph Kosinski ì•¡ì…˜ íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
```

> ì½”ë“œ ì‘ì„±

```python
movies = Movie.objects.all()
for movie in movies:
    print(
        movie.director.name,
        movie.genre.title, # movieì˜ genre í•„ë“œì˜ title í•„ë“œ ì¶œë ¥
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 11. ì˜í™” ë°ì´í„°ë“¤ì„ `ìµœì‹  ê°œë´‰í•œ ì˜í™”ìˆœ`ìœ¼ë¡œ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì˜ˆì‹œ ì¶œë ¥

```
ì´ì •ì¬ ì²©ë³´ í—ŒíŠ¸ 2022-08-10 125 True
í•œì¬ë¦¼ ì¬ë‚œ ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
ê¹€í•œë¯¼ ì‚¬ê·¹ í•œì‚° 2022-07-27 129 True
ìµœë™í›ˆ SF ì™¸ê³„+ì¸ 2022-07-20 142 False
Joseph Kosinski ì•¡ì…˜ íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê¸°ìƒì¶© 2019-05-30 132 False
ë´‰ì¤€í˜¸ SF ì„¤êµ­ì—´ì°¨ 2013-10-30 125 False
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê´´ë¬¼ 2006-07-27 119 False
ì´ê²½ê·œ ì•¡ì…˜ ë³µìˆ˜í˜ˆì „ 1992-10-10 88 False
```

> ì½”ë“œ ì‘ì„±

```python
movies = Movie.objects.order_by("-opening_date") # ê°œë´‰ì¼ ë‚´ë¦¼ì°¨ìˆœìœ¼ë¡œ ì •ë ¬í•´ì„œ ì¡°íšŒ
for movie in movies:
    print(
        movie.director.name,
        movie.genre.title,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 12. ì˜í™” ë°ì´í„° ì¤‘ `ê°€ì¥ ë¨¼ì € ê°œë´‰í•œ` ì˜í™”ë¥¼ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì˜ˆì‹œ ì¶œë ¥

```
ì´ê²½ê·œ ì•¡ì…˜ ë³µìˆ˜í˜ˆì „ 1992-10-10 88 False
```

> ì½”ë“œ ì‘ì„±

```python
movie = Movie.objects.order_by("opening_date")[0]
print(
    movie.director.name,
    movie.genre.title,
    movie.title,
    movie.opening_date,
    movie.running_time,
    movie.screening,
)
```

### 13. ì˜í™” ë°ì´í„° ì¤‘ í˜„ì¬ `ìƒì˜ ì¤‘`ì¸ ì˜í™”ë“¤ì„ `ê°œë´‰ì¼ ìˆœ`ìœ¼ë¡œ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ìƒì˜ ì¤‘ `screening = True`

> ì˜ˆì‹œ ì¶œë ¥

```
Joseph Kosinski ì•¡ì…˜ íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
ê¹€í•œë¯¼ ì‚¬ê·¹ í•œì‚° 2022-07-27 129 True
í•œì¬ë¦¼ ì¬ë‚œ ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
ì´ì •ì¬ ì²©ë³´ í—ŒíŠ¸ 2022-08-10 125 True
```

> ì½”ë“œ ì‘ì„±

```python
movies = Movie.objects.filter(screening=True).order_by("opening_date")
for movie in movies:
    print(
        movie.director.name,
        movie.genre.title,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 14. ì˜í™” ê°ë…ì´ `ë´‰ì¤€í˜¸` ì¸ ì˜í™”ë“¤ì„ `ê°œë´‰ì¼ ìˆœ`ìœ¼ë¡œ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> íŒíŠ¸ : `name`ì´ ë´‰ì¤€í˜¸ì¸ Directorì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.

> ì˜ˆì‹œ ì¶œë ¥

```
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê´´ë¬¼ 2006-07-27 119 False
ë´‰ì¤€í˜¸ SF ì„¤êµ­ì—´ì°¨ 2013-10-30 125 False
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê¸°ìƒì¶© 2019-05-30 132 False
```

> ì½”ë“œ ì‘ì„±

```python
director_ = Director.objects.get(name="ë´‰ì¤€í˜¸") # nameì´ ë´‰ì¤€í˜¸ì¸ ëª¨ë¸ Driectorì˜ ì¸ìŠ¤í„´ìŠ¤
movies = Movie.objects.filter(director=director_).order_by("opening_date")
for movie in movies:
    print(
        movie.director.name,
        movie.genre.title,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 15. `ë´‰ì¤€í˜¸` ê°ë… ì˜í™” ì¤‘ ë‘ ë²ˆì§¸ë¡œ ê°œë´‰í•œ ì˜í™”ë¥¼ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì˜ˆì‹œ ì¶œë ¥

```
ë´‰ì¤€í˜¸ SF ì„¤êµ­ì—´ì°¨ 2013-10-30 125 False
```

> ì½”ë“œ ì‘ì„±

```python
director_ = Director.objects.get(name="ë´‰ì¤€í˜¸")
movie = Movie.objects.filter(director=director_).order_by("opening_date")[1]
print(
    movie.director.name,
    movie.genre.title,
    movie.title,
    movie.opening_date,
    movie.running_time,
    movie.screening,
)
```

### 16. ì˜í™”ì˜ ìƒì˜ ì‹œê°„ `running_time` ì´ 119 ë³´ë‹¤ í° ì˜í™”ë“¤ì„ ìƒì˜ ì‹œê°„ìˆœìœ¼ë¡œ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì˜ˆì‹œ ì¶œë ¥

```
ë´‰ì¤€í˜¸ SF ì„¤êµ­ì—´ì°¨ 2013-10-30 125 False
ì´ì •ì¬ ì²©ë³´ í—ŒíŠ¸ 2022-08-10 125 True
ê¹€í•œë¯¼ ì‚¬ê·¹ í•œì‚° 2022-07-27 129 True
Joseph Kosinski ì•¡ì…˜ íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê¸°ìƒì¶© 2019-05-30 132 False
í•œì¬ë¦¼ ì¬ë‚œ ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
ìµœë™í›ˆ SF ì™¸ê³„+ì¸ 2022-07-20 142 False
```

> ì½”ë“œ ì‘ì„±

```python
movies = Movie.objects.filter(running_time__gt=119).order_by("running_time")

for movie in movies:
    print(
        movie.director.name,
        movie.genre.title,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 17. ì˜í™”ì˜ ìƒì˜ ì‹œê°„ `running_time` ì´ 119 ì´ìƒì¸ ì˜í™”ë“¤ì„ ìƒì˜ ì‹œê°„ìˆœìœ¼ë¡œ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì˜ˆì‹œ ì¶œë ¥

```
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê´´ë¬¼ 2006-07-27 119 False
ë´‰ì¤€í˜¸ SF ì„¤êµ­ì—´ì°¨ 2013-10-30 125 False
ì´ì •ì¬ ì²©ë³´ í—ŒíŠ¸ 2022-08-10 125 True
ê¹€í•œë¯¼ ì‚¬ê·¹ í•œì‚° 2022-07-27 129 True
Joseph Kosinski ì•¡ì…˜ íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê¸°ìƒì¶© 2019-05-30 132 False
í•œì¬ë¦¼ ì¬ë‚œ ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
ìµœë™í›ˆ SF ì™¸ê³„+ì¸ 2022-07-20 142 False
```

> ì½”ë“œ ì‘ì„±

```python
movies = Movie.objects.filter(running_time__gte=119).order_by("running_time")

for movie in movies:
    print(
        movie.director.name,
        movie.genre.title,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 18. `2022-01-01` ì´í›„ë¡œ ê°œë´‰í•œ ì˜í™”ë¥¼ ê°œë´‰ì¼ ìˆœìœ¼ë¡œ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> ì˜ˆì‹œ ì¶œë ¥

```
Joseph Kosinski ì•¡ì…˜ íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
ìµœë™í›ˆ SF ì™¸ê³„+ì¸ 2022-07-20 142 False
ê¹€í•œë¯¼ ì‚¬ê·¹ í•œì‚° 2022-07-27 129 True
í•œì¬ë¦¼ ì¬ë‚œ ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
ì´ì •ì¬ ì²©ë³´ í—ŒíŠ¸ 2022-08-10 125 True
```

> ì½”ë“œ ì‘ì„±

```python
movies = Movie.objects.filter(opening_date__gte="2022-01-01").order_by("opening_date")

for movie in movies:
    print(
        movie.director.name,
        movie.genre.title,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 19. ë´‰ì¤€í˜¸ ê°ë… ì˜í™” ì¤‘ ì¥ë¥´ê°€ ë“œë¼ë§ˆì¸ ì˜í™”ë“¤ì„ ê°œë´‰ì¼ ìˆœìœ¼ë¡œ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> íŒíŠ¸ :`Movie.objects.filter(ì¡°ê±´1, ì¡°ê±´2,...)` ì´ ì½”ë“œëŠ” `WHERE ì¡°ê±´1 AND ì¡°ê±´2` ì™€ ë™ì¼í•©ë‹ˆë‹¤.

> ì˜ˆì‹œ ì¶œë ¥

```
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê´´ë¬¼ 2006-07-27 119 False
ë´‰ì¤€í˜¸ ë“œë¼ë§ˆ ê¸°ìƒì¶© 2019-05-30 132 False
```

> ì½”ë“œ ì‘ì„±

```python
# ê°ê° nameì´ ë´‰ì¤‘í˜¸ì¸ Director ì¸ìŠ¤í„´ìŠ¤ director_ì™€ titleì´ ë“œë¼ë§ˆì¸ Genre ì¸ìŠ¤í„´ìŠ¤ genre_ ìƒì„±
director_ = Director.objects.get(name="ë´‰ì¤€í˜¸")
genre_ = Genre.objects.get(title="ë“œë¼ë§ˆ")

# directorê°€ director_ ì´ê³ , genreê°€ genre_ì¸ Movie ë°ì´í„° íƒìƒ‰
movies = Movie.objects.filter(director=director_, genre=genre_).order_by("opening_date")

for movie in movies:
    print(
        movie.director.name,
        movie.genre.title,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```

### 20. ë´‰ì¤€í˜¸ ê°ë…ì˜ ì˜í™”ê°€ ì•„ë‹Œ ì˜í™”ë“¤ì„ ê°œë´‰ì¼ ìˆœìœ¼ë¡œ ì¡°íšŒí•´ì„œ ì¶œë ¥í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”.

> íŒíŠ¸ : `filter` ì™€ ë°˜ëŒ€ë˜ëŠ” ë©”ì†Œë“œë¡œ `exclude` ê°€ ìˆìŠµë‹ˆë‹¤.

> ì°¸ê³  ì‚¬ì´íŠ¸

[[Django] QuerySet ë©”ì†Œë“œ ì •ë¦¬ (2) - CRUD](https://devvvyang.tistory.com/37)

> ì˜ˆì‹œ ì¶œë ¥

```
ì´ê²½ê·œ ì•¡ì…˜ ë³µìˆ˜í˜ˆì „ 1992-10-10 88 False
Joseph Kosinski ì•¡ì…˜ íƒ‘ê±´ : ë§¤ë²„ë¦­ 2022-06-22 130 True
ìµœë™í›ˆ SF ì™¸ê³„+ì¸ 2022-07-20 142 False
ê¹€í•œë¯¼ ì‚¬ê·¹ í•œì‚° 2022-07-27 129 True
í•œì¬ë¦¼ ì¬ë‚œ ë¹„ìƒì„ ì–¸ 2022-08-03 140 True
ì´ì •ì¬ ì²©ë³´ í—ŒíŠ¸ 2022-08-10 125 True
```

> ì½”ë“œ ì‘ì„±

```python
director_ = Director.objects.get(name="ë´‰ì¤€í˜¸")
movies = Movie.objects.exclude(director=director_).order_by("opening_date")

for movie in movies:
    print(
        movie.director.name,
        movie.genre.title,
        movie.title,
        movie.opening_date,
        movie.running_time,
        movie.screening,
    )
```
