# 8/16

# 🕓 9:00 ~ 6:00

## ✅ Database

### Database

```py
데이터베이스는 "체계화된 데이터"의 모임
여러 사람이 공유하고 사용할 목적으로 통합 관리되는 정보의 집합
논리적으로 연관된 자료의 모음으로
그 내용을 고도로 구조화 함으로써 "검색과 갱신"의 효율화를 꾀함
자료 항목의 중복을 없애고 자료를 구조화하여 기억시켜 놓은 자료의 집합체
```

### **Database 장점**

```py
데이터 중복 최소화
데이터 무결성(정확한 정보를 보장)
데이터 일관성
데이터 독립성
데이터 표준화
데이터 보안 유지
```

## ✅ RDB(관계형 데이터베이스)

```py
서로 관련된 데이터를 저자하고 접근할 수 있는 데이터베이스 유형
키(key)와 값(value)들의 간단한 관계
```

### **스키마(schema)**

```py
데이터베이스에서 자료의 구조, 표현방법, 관계등 전반적인 "명세를 기술"한 것
id : int
name : text
address : text
age : int
```

### **테이블(table)**

```py
열과 행의 모델을 사용해 조직된 데이터 요소들의 집합
id | name  |  address | age
1  | 홍길동|    제주  |  20
```

### **기본키(Primary Key)**

```py
각 행(레코드)의 고유 값
반드시 설정해야 하며, 데이터베이스 관리 및 관계 설정 시 주요하게 활용
id | name  |  address | age
1  | 홍길동|    제주  |  20
여기에서는 id 값을 의미
```

### **RDBMS**

```py
관계형 모델을 기반으로 하는 데이터 베이스 관리시스템을 의미
mysql, sqlite, oracle, sqlSever
```

### **SQlite**

```py
서버 형태가 아닌 파일 형식으로 응용 프로그램에 넣어서 사용하는 "비교적 가벼운 데이터베이스"
구글 안드로이드 운영체제에 기본적으로 탑재된 데이터베이스, 임베디드 소프트웨어에도 많이 활용
로컬에서 간단한 DB 구성을 할 수 있으며, 오픈소스 프로젝트이기 때문에 자유롭게 사용 가능
```

### **SQL(Structured Query Landguage)**

```py
관계형 데이터베이스 관리시스템의 "데이터 관리"를 위해 설계된
"특수 목적으로 프로그래밍 언어"

DDL - 데이터 정의 언어 (관계형 데이터베이스 구조를 정의하기 위한 명령어)
DML - 데이터 조작 언어 (데이터를 저장, 조회, 수정, 삭제 등을 하기 위한 명령어)
DCL - 데이터 제어 언어 (데이터베이스 사용자의 권한 제어를 위해 사용하는 명령어)
```

### **테이블 생성**

```py
CREATE TABLE classmates(table명) (
    id INTEGER PRIMARY KEY,
    name TEXT
);
```

### **테이블 목록 조회**

```py
# 테이블 목록 조회
.tables
# 특정 테이블 스키마 조회
.schema classmates
# 값 추가
INSERT INTO classmates VALUES (1, '이명학');

# 테이블 조회
SELECT * FROM classmates;

# 테이블 삭제
DROP TABLE classmates;
```

### **필드 제약 조건**

```py
# NULL 값 입력 금지
NOT NULL
# 중복 값 입력 금지
UNIQUE
# 테이블에서 반드시 하나. NOT NULL + UNIQUE
PRIMARY KEY
# 외래키, 다른 테이블의 key
FOREIGN KEY
# 조건으로 설정된 값만 허용
CHECK
```

## ✅ CRUD(Create Read Update Delete)

### **CREATE**

```py
INSERT
테이블에 단일 행 삽입
INSERT INTO 테이블_이름 (컬럼1, 컬럼2) VALUES (값1, 값2);
테이블에 정의된 모든 컬럼에 맞춰 순서대로 입력
INSERT INTO 테이블_이름 VALUES (값1, 값2, 값3);

​INSERT INTO classmate (name,age) VALUES (홍길동,23);
```

### **INSERT**

```py
INSERT
테이블에 단일 행 삽입
INSERT INTO 테이블_이름 (컬럼1, 컬럼2) VALUES (값1, 값2);
테이블에 정의된 모든 컬럼에 맞춰 순서대로 입력
INSERT INTO 테이블_이름 VALUES (값1, 값2, 값3);

​INSERT INTO classmate VALUES
('홍길동', 30, '서울')
('이명학', 28, '부산')
('이호영', 23, '경기')
('최해영', 15, '제주')
```

### **SELECT**

```py
테이블에서 데이터를 조회
SELECT 문은 SQL에서 기본이 되는 문이며 다양한 절과 함께 사용

SELECT DISTINCT
조회 결과에서 중복 행을 제거

# 주소가 서울인 사람을 조회
SELECT * FROM classmates WHERE address='서울';
# 중복 값을 제거
SELECT DISTINCT age FROM classmates;
```

### **DELETE**

```py
테이블에서 데이터를 삭제
DELETE FROM classmates WHERE rowid=5;
id 값이 5인 데이터를 제거
```

### **UPDATE**

```py
테이블에서 데이터를 업데이트
UPDATE classmates SET address='서울' WHERE rowid=5
id 값이 5인 데이터를 업데이트
```

## ✅ 실습 문제

````sql

## 실행

```bash
$ sqlite3 healthcare.sqlite3
````

## Column 출력 설정

```sql
sqlite3> .headers on
sqlite3> .mode column
```

## table 및 스키마 조회

```sql
sqlite3> .tables
healthcare

sqlite3> .schema healthcare
CREATE TABLE healthcare (
id PRIMARY KEY,
sido INTEGER NOT NULL,
gender INTEGER NOT NULL,
age INTEGER NOT NULL,
height INTEGER NOT NULL,
weight INTEGER NOT NULL,
waist REAL NOT NULL,
va_left REAL NOT NULL,
va_right REAL NOT NULL,

blood_pressure INTEGER
NOT NULL,
smoking INTEGER NOT NULL,
is_drinking BOOLEAN NOT NULL
);
```

# 문제

### 1. 추가되어 있는 모든 데이터의 수를 출력하시오.

```sql
SELECT COUNT(*) FROM healthcare;
```

```
COUNT(*)
--------
1000000
```

### 2. 나이 그룹이 10(age)미만인 사람의 수를 출력하시오.

```sql
SELECT COUNT(*) FROM healthcare WHERE age <= 10;
```

```
COUNT(*)
--------
156277
```

### 3. 성별이 1인 사람의 수를 출력하시오.

```sql
SELECT COUNT(*) FROM healthcare WHERE gender = 1;
```

```
COUNT(*)
--------
510689
```

### 4. 흡연 수치(smoking)가 3이면서 음주(is_drinking)가 1인 사람의 수를 출력하시오.

```sql
SELECT COUNT(*) FROM healthcare WHERE smoking = 3 and is_drinking = 1;
```

```
COUNT(*)
--------
150361
```

### 5. 양쪽 시력이(va_left, va_right) 모두 2.0이상인 사람의 수를 출력하시오.

```sql
SELECT COUNT(*) FROM healthcare WHERE va_left >= 2 and va_right >= 2;
```

```
COUNT(*)
--------
2614
```

### 6. 시도(sido)를 모두 중복 없이 출력하시오.

```sql
SELECT DISTINCT sido FROM healthcare;
```

```
36
27
11
31
41
44
48
30
42
43
46
28
26
47
45
29
49
```

### 자유롭게 조합해서 원하는 데이터를 출력해보세요.

> 예) 허리 둘레가 x이상이면서 몸무게가 y이하인 사람

```sql
SELECT COUNT(*) FROM healthcare WHERE waist >= 15 and weight >= 60
```

```
COUNT(*)
--------
639986
```

```

```
