# 8/17

# ğŸ•“ 9:00 ~ 6:00

## âœ… Database

### WHERE

```sql
Table ìƒì„±
CREATE TABLE í…Œì´ë¸”ì´ë¦„(users)
```

### **users í…Œì´ë¸”ì—ì„œ ageê°€ 30 ì´ìƒ ì¡°íšŒ**

```sql
â€‹SELECT * FROM users WHERE age >= 30;
```

### **users í…Œì´ë¸”ì—ì„œ ageê°€ 30 ì´ìƒì¸ ì‚¬ëŒ ì´ë¦„ ì¡°íšŒ**

```sql
â€‹SELECT first_name FROM users WHERE age >= 30;
```

### **users í…Œì´ë¸”ì—ì„œ ageê°€ 30 ì´ìƒì´ê³  ì„±ì´ 'ê¹€'ì¸ ì‚¬ëŒ ì¡°íšŒ**

```sql
SELECT age, first_name FROM users WHERE age >= 30 AND last_name = 'ê¹€';
```

## âœ… WHEREì ˆì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì—°ì‚°ì

```py
ë¹„êµ ì—°ì‚°ì
=, >, >= ë“± ëŒ€,ì†Œ ë™ì¼ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ì—°ì‚°ì
ë…¼ë¦¬ ì—°ì‚°ì
AND, OR, NOT(ë’¤ì— ì˜¤ëŠ” ì¡°ê±´ì˜ ê²°ê³¼ë¥¼ ë°˜ëŒ€ë¡œ)
```

### **SQL ì‚¬ìš© ì—°ì‚°ì**

```sql
BETWEEN ê°’1 AND ê°’2 ë‘ ê°’ ì‚¬ì´ì˜ ë¹„êµ
IN (ê°’1, ê°’2) ëª©ë¡ ì¤‘ì— í•˜ë‚˜ë¼ë„ ì¼ì¹˜í•˜ë©´ ì„±ê³µ
LIKE ë¹„êµ ë¬¸ìì—´ê³¼ í˜•íƒœ ì¼ì¹˜
IS NULL NULL ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œ
```

### **ì—°ì‚°ì ìš°ì„ ìˆœìœ„**

```sql
1ìˆœìœ„ ê´„í˜¸
2ìˆœìœ„ NOT
3ìˆœìœ„ ë¹„êµ ì—°ì‚°ì, SQL
4ìˆœìœ„ AND
5ìˆœìœ„ OR
```

## âœ… SQLite Aggregate Functions

### **ì§‘ê³„ í•¨ìˆ˜**

```SQL
ê°’ ì§‘í•©ì— ëŒ€í•œ ê³„ì‚°ì„ ìˆ˜í–‰í•˜ê³  ë‹¨ì¼ ê°’ì„ ë°˜í™˜
ì—¬ëŸ¬ í–‰ìœ¼ë¡œë¶€í„° í•˜ë‚˜ì˜ ê²°ê´ê°’ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
SELECT êµ¬ë¬¸ì—ì„œë§Œ í™œìš©ë¨
COUNT
AVG ëª¨ë“  ê°’ì˜ í‰ê· 
MAX
MIN
SUM
```

### **ê³„ì¢Œì”ê³ ê°€ ê°€ì¥ ë§ì€ì‚¬ëŒì˜ ì´ë¦„**

```sql
SELECT MAX(balance),first_name FROM users;
```

## âœ… LIKE

### **íŒ¨í„´ ì¼ì¹˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒ**

```sql
SQLiteëŠ” íŒ¨í„´ êµ¬ì„±ì„ ìœ„í•œ 2ê°œì˜ wildcardsë¥¼ ì œê³µ
% -> 0ê°œ ì´ìƒì˜ ë¬¸ì
_ -> ì„ì˜ì˜ ë‹¨ì¼ ë¬¸ì
```

## âœ… ORDER BY

```sql
ì¡°íšŒ ê²°ê³¼ ì§‘í•©ì„ ì •ë ¬
SELECT ë¬¸ì— ì¶”ê°€í•˜ì—¬ ì‚¬ìš©
ì •ë ¬ ìˆœì„œë¥¼ ìœ„í•œ 2ê°œì˜ keyword ì œê³µ
ASC - ì˜¤ë¦„ì°¨ìˆœ
DESC - ë‚´ë¦¼ì°¨ìˆœ

users ì—ì„œ ë‚˜ì´ ìˆœìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬í•˜ì—¬ ìƒìœ„ 10ê°œ ì¡°íšŒ
SELECT * FROM users ORDER BY age ASC LIMIT 10;
users ì—ì„œ ë‚˜ì´, ì„± ìˆœìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ
SELECT * FROM users ORDER BY age, last_name LIMIT 10;
ê³„ì¢Œ ì”ì•¡ ë‚´ë¦¼ì°¨ìˆœ(ë†’ì€->ë‚®ì€ ê²ƒ), ì„± ì˜¤ë¦„ì°¨ìˆœ(ã„±->ã…)
SELECT last_name, first_name, balance FROM users ORDER BY balance DESC, last_name ASC LIMIT 10;
```

## âœ… ì‹¤ìŠµ ë¬¸ì œ

# 2ì¼ì°¨ ì‹¤ìŠµ

## ì‚¬ì „ í™•ì¸

### ì‹¤í–‰

```bash
$ sqlite3 healthcare.sqlite3
```

### Column ì¶œë ¥ ì„¤ì •

```sql
sqlite3> .headers on
sqlite3> .mode column
```

### table ë° ìŠ¤í‚¤ë§ˆ ì¡°íšŒ

```sql
sqlite3> .tables
healthcare

sqlite3> .schema healthcare
CREATE TABLE healthcare (
    id PRIMARY KEY,
    sido INTEGER NOT NULL,
    gender INTEGER NOT NULL,
    age INTEGER NOT NULL,
    height INTEGER NOT NULL,
    weight INTEGER NOT NULL,
    waist REAL NOT NULL,
    va_left REAL NOT NULL,
    va_right REAL NOT NULL,

    blood_pressure INTEGER
    NOT NULL,
    smoking INTEGER NOT NULL,
    is_drinking BOOLEAN NOT NULL
);
```

## ë¬¸ì œ

### 1. ì¶”ê°€ë˜ì–´ ìˆëŠ” ëª¨ë“  ë°ì´í„°ì˜ ìˆ˜ë¥¼ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT COUNT(*) FROM healthcare;
```

```
COUNT(*)
--------
1000000

```

### 2. ì—°ë ¹ ì½”ë“œ(age)ì˜ ìµœëŒ€, ìµœì†Œ ê°’ì„ ëª¨ë‘ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT MAX(age), MIN(age) FROM healthcare;
```

```
MAX(age)  MIN(age)
--------  --------
18        9

```

### 3. ì‹ ì¥(height)ê³¼ ì²´ì¤‘(weight)ì˜ ìµœëŒ€, ìµœì†Œ ê°’ì„ ëª¨ë‘ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT MAX(height), MIN(height), MAX(weight), MIN(weight) FROM healthcare;
```

```
MAX(height)  MIN(height)  MAX(weight)  MIN(weight)
-----------  -----------  -----------  -----------
195          130          135          30
```

### 4. ì‹ ì¥(height)ì´ 160ì´ìƒ 170ì´í•˜ì¸ ì‚¬ëŒì€ ëª‡ ëª…ì¸ì§€ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT COUNT(*) FROM healthcare WHERE height <= 170 AND height >= 160;
```

```
COUNT(*)
--------
516930
```

### 5. ìŒì£¼(is_drinking)ë¥¼ í•˜ëŠ” ì‚¬ëŒ(1)ì˜ í—ˆë¦¬ ë‘˜ë ˆ(waist)ë¥¼ ë†’ì€ ìˆœìœ¼ë¡œ 5ëª… ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT waist FROM healthcare ORDER BY waist AND is_drinking = 1 DESC LIMIT 5;
```

```
waist
-----
94.0
93.0
63.0
90.0
89.0
```

### 6. ì‹œë ¥ ì–‘ìª½(va_left, va_right)ì´ 1.5ì´ìƒì´ë©´ì„œ ìŒì£¼(is_drinking)ë¥¼ í•˜ëŠ” ì‚¬ëŒì˜ ìˆ˜ë¥¼ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT COUNT(is_drinking=1) FROM healthcare WHERE va_left >= 1.5 AND va_right >= 1.5;
```

```
COUNT(is_drinking=1)
--------------------
50324
```

### 7. í˜ˆì••(blood_pressure)ì´ ì •ìƒ ë²”ìœ„(120ë¯¸ë§Œ)ì¸ ì‚¬ëŒì˜ ìˆ˜ë¥¼ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT COUNT(*) FROM healthcare WHERE blood_pressure < 120;
```

```
COUNT(*)
--------
360808
```

### 8. í˜ˆì••(blood_pressure)ì´ 140ì´ìƒì¸ ì‚¬ëŒë“¤ì˜ í‰ê·  í—ˆë¦¬ë‘˜ë ˆ(waist)ë¥¼ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT AVG(waist) FROM healthcare WHERE blood_pressure >= 140;
```

```
AVG(waist)
----------------
85.8665098512525
```

### 9. ì„±ë³„(gender)ì´ 1ì¸ ì‚¬ëŒì˜ í‰ê·  í‚¤(height)ì™€ í‰ê·  ëª¸ë¬´ê²Œ(weight)ë¥¼ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT AVG(height), AVG(weight) FROM healthcare WHERE gender = 1;
```

```
AVG(height)       AVG(weight)
----------------  ----------------
167.452735422145  69.7131620222875
```

### 10. í‚¤ê°€ ê°€ì¥ í° ì‚¬ëŒ ì¤‘ì— ë‘ë²ˆì§¸ë¡œ ë¬´ê±°ìš´ ì‚¬ëŒì˜ idì™€ í‚¤(height), ëª¸ë¬´ê²Œ(weight)ë¥¼ ì¶œë ¥í•˜ì‹œì˜¤.

```sql
SELECT id, height, weight FROM healthcare ORDER BY height DESC, weight DESC LIMIT 5;

```

```
id      height  weight
------  ------  ------
836005  195     110
```
